<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../neon-animation-behavior.html">
<link rel="import" href="../web-animations.html">


<!--
`<fill-blink-animation>` animates the fill property of an element from the initial color to a custom color.
It is usefull to manipulate svg element.
Configuration:
```
{
  name: 'fill-blink-animation',
  node: <node>,
  color: <color>,
  timing: <animation-timing>
}
```
-->

<script>
  Polymer({

    is: 'fill-blink-animation',

    behaviors: [
      Polymer.NeonAnimationBehavior
    ],

    configure: function(config) {
      var node = this.node = config.node,
          color = this.color = node.style.fill || node.getAttribute('fill');
      this._effect = new KeyframeEffect(node, [
        {'fill': color},
        {'fill': config.color},
        {'fill': color}
      ], this.timingFromConfig(config));
      return this._effect;
    },

    /**
     * Set to the initial value the fill property of the HTML element.
     * This is a workaround for firefox and safari.
     * The css fill property is directly well supported in chrome.
     */
    complete: function() {
      this.node.setAttribute('fill', this.color);
      this.node.style.fill = this.color;
    }
  });
</script>
